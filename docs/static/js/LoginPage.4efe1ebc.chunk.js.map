{"version":3,"sources":["webpack:///./src/components/waiting/index.jsx","webpack:///./src/agent/auth.js","webpack:///./src/pages/Login/index.jsx"],"names":["Waiting","react_default","a","createElement","className","login","data","arguments","length","undefined","request","post","url","then","setToken","token","User","get","register","LoginPage","connect","_ref","global","props","_this","_classCallCheck","this","_getPrototypeOf","call","_defineProperty","_assertThisInitialized","dispatch","type","payload","logout","state","accountid","password","Component","react","onClick","components_waiting"],"mappings":"uKAaeA,UANC,kBACdC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,wCCLSE,EAAQ,eAACC,EAADC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAQ,GAAR,OAAeG,IAAQC,KAAK,CAAEC,IAAK,aAAcN,SAAQO,KAAK,SAACP,GAElF,OADAQ,YAASR,EAAKS,OACPC,IAAKC,KAAI,MAGLC,EAAW,eAACZ,EAADC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAQ,GAAR,OAAeG,IAAQC,KAAK,CAAEC,IAAK,gBAAiBN,SAAQO,KAAK,SAACP,GAExF,OADAQ,YAASR,EAAKS,OACPC,IAAKC,KAAI,04BCNlB,IAKqBE,EADpBC,YAJuB,SAAAC,GAAA,MAAiB,CACvCC,OADsBD,EAAGC,wBAMzB,SAAAH,EAAYI,GAAO,IAAAC,MAAA,mGAAAC,CAAAC,KAAAP,KACjBO,OAAAC,EAAAR,GAAAS,KAAAF,KAAMH,GAANC,oDADiBK,EAAAC,IAAAN,IAAA,QAQX,YAENO,EADqBP,EAAKD,MAAlBQ,UACC,CAAEC,KAAM,QAASC,QAAS5B,QAVlBwB,EAAAC,IAAAN,IAAA,WAaR,YAETO,EADqBP,EAAKD,MAAlBQ,UACC,CAAEC,KAAM,WAAYC,QAASf,QAfrBW,EAAAC,IAAAN,IAAA,SAkBV,YAEPO,EADqBP,EAAKD,MAAlBQ,UACC,CAAEC,KAAM,SAAUC,QAASC,aAlBpCV,EAAKW,MAAQ,CACXC,UAAW,GACXC,SAAU,IAJKb,yPADkBc,uDAyBnC,OACErC,EAAAC,EAAAC,cAACoC,EAAA,SAAD,KACEtC,EAAAC,EAAAC,cAAA,UAAQqC,QAASd,KAAKrB,OAAtB,4BACAJ,EAAAC,EAAAC,cAACsC,EAAD","file":"static/js/LoginPage.4efe1ebc.chunk.js","sourcesContent":["/**\n * @file 等候组件\n * @author mengchen <sisimengchen@gmail.com>\n */\nimport React from 'react';\nimport './index.scss';\n\nconst Waiting = () => (\n  <div className=\"components-waiting\">\n    <span />\n  </div>\n);\n\nexport default Waiting;\n","import { setToken } from 'utils/token';\nimport { User } from 'utils/user';\nimport { request } from 'utils/request';\n\nexport const login = (data = {}) => request.post({ url: '/api/login', data }).then((data) => {\n  setToken(data.token);\n  return User.get(true);\n});\n\nexport const register = (data = {}) => request.post({ url: '/api/register', data }).then((data) => {\n  setToken(data.token);\n  return User.get(true);\n});\n\nexport const logout = () => request.post({ url: '/api/logout' }).then(() => {\n  setToken(null);\n});\n","import React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport Waiting from 'components/waiting';\nimport { login, register } from 'agent';\n\nconst mapStateToProps = ({ global }) => ({\n  global: global\n});\n\n@connect(mapStateToProps)\nexport default class LoginPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accountid: '',\n      password: ''\n    };\n  }\n\n  login = () => {\n    const { dispatch } = this.props;\n    dispatch({ type: 'LOGIN', payload: login() });\n  };\n\n  register = () => {\n    const { dispatch } = this.props;\n    dispatch({ type: 'REGISTER', payload: register() });\n  };\n\n  logout = () => {\n    const { dispatch } = this.props;\n    dispatch({ type: 'LOGOUT', payload: logout() });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <button onClick={this.login}>一键登录</button>\n        <Waiting />\n      </Fragment>\n    );\n  }\n}\n"],"sourceRoot":""}